* README.org (versione iniziale)

/a Timo,
che non sapeva di scatenare tutto questo/

*Questo modulo contiene la configurazione della tastiera "US IT Intranational layout" e lo script aggiuntivo necessario per configurarla su Windows 10. Il nome lo devo ad un felice refuso, che mi ha segnalato cio' che effettivamente stavo facendo.*

La tastiera e' una tastiera fisica TKL UK ISO, ma con la disposizione dei tasti US, impostata su Windows 10 come =US international layout=.  Quest'ultimo viene poi modificato, mediante uno script AHK, per aggiungervi tutte le lettere accentate italiane (maiuscole e minuscole) ed disabilitare i /dead keys/, ripristinando per i tasti dei segni diacritici il loro comportamento ordinario.

Tutto cio' e' necessario perche' in Windows un layout simile non e' disponibile; su Linux viceversa e' possibile ottenere un comportamento quasi identico, semplicemente inpostando il layout come =IT, US layout= 

** procedura di configurazione e installazione

Procurarsi una tastiera TKL UK ISO Layout con i tasti (/keycap/) agguntivi US (p.es. [[https://www.keychron.com/collections/keychron-iso-keyboard-collection/products/keychron-k8-wireless-mechanical-keyboard-uk-iso-layout][Keychron K8 ISO UK]]).

[[file:K8.webp]]

Sostituire i tasti dell'UK layout con i corrispondeti tasti US, fino ad ottenere una disposizione simile alla tastiera US ISO. Si deve sostituire o commutare sei tasti: tre in R1, nessuno in R2, due in R3, uno in R1. 

Partendo quindi dall'UK ISO Layout mostrato [[http://www.farah.cl/Keyboardery/A-Visual-Comparison-of-Different-National-Layouts/enUK.png][qui a destra in basso]], bisogna operare sui tasti evidenziati in blu, fino a raggiungere la disposizione di una tastiera US ISO, mostrata [[http://www.farah.cl/Keyboardery/A-Visual-Comparison-of-Different-National-Layouts/enUSin.png][qui in basso a destra]]. 

Questo otterra' una configurazione di tasti non alfabetici "di tipo US", con il tasto Enter largo, con la presenza del tasto AltGr e con il tasto =\ |= duplicato in due diverse posizioni (accanto allo shift di sinistra e accanto al tasto Enter, riga in basso).

[img]

Configurare nel sistema operativo la tastiera come =US International layout=, per poter avere attivo il tasto AltGr come tasto distinto dall'Alt.

Scaricare dal sito [[https://www.autohotkey.com][AHK]] il tool in versione /portable/, scegliendo cioe' il file =.zip= che non richiede installazione ([[https://www.autohotkey.com/download/ahk.zip][ahk.zip]]), e decomprimerlo in una directory.

Scaricare lo script =lm-us-intl-no-dead-keys-AltGR-euioadjk.ahk= da questo repository e salvarlo nella stessa directory del tool o dove si vuole.

Associare l'estensione .ahk permanentemente al lancio della versione UTF 64 del tool (=AutoHotkeyU64.exe=).

Lanciare lo script =lm-us-intl-no-dead-keys-AltGR-euioadjk.ahk= ed eventualmente aggiungerlo alla esecuzione automatica, all'avvio di Windows.

Se tutto e' stato eseguito correttamente comparira' il logo verde "H" nella barra di stato e la tastiera sara' configurata come desiderato in modalita' "US IT Intranational layout".

** utilizzo della tastiera

La tastiera utilizza ora il classico layout US ISO per tutti i tasti, alfabetici e non.

Per ottenere i caratteri /backslash/ e /pipe/ ('\\' e '|') si utilizza il tasto a destra dello shift di sinistra (preferisco questa scelta per simmetria col tasto =/ ?=, all'estremita' opposta).

Per ottenere le lettere accentate italiane si usano le combinazioni del tasto =AltGr= e della vocale corrispondente (=a e i o u=), aggiungendovi lo =Shift= per ottenere le maiuscole. 

I caratteri 'é' e 'ó' e 'î' si ottengono rispettivamente con le combinazioni =AltGr-d=, =AltGr-k= e =AltGr-j=, con =AltGr-Shift= le corrispondenti maiuscole. La scelta ovviamente dipende dal fatto che questi tasti sono posti al di sotto di quello della vocale modificata.

Il tasto duplicato (=\ |=), quello sotto l'Enter, e' disponibile per aggiungere due ulteriori caratteri al layout (al momento e' mappato come =- *=).

** riferimenti

- http://www.farah.cl/Keyboardery/A-Visual-Comparison-of-Different-National-Layouts/
- https://www.keychron.com/pages/k8-uk-iso-layout-hd-picture
- https://www.keychron.com/collections/keychron-iso-keyboard-collection/products/keychron-k8-wireless-mechanical-keyboard-uk-iso-layout
- https://daviddeley.com/autohotkey/xprxmp/autohotkey_expression_examples.htm



** definizione dei requisiti desiderati

Requisiti della mia tastiera ideale:

- tasti freccia a T rovesciata, posizionati esternamente al blocco principale dei tasti (e non "immersi" nella tastiera)
- tasti INS, HOME, PGUP, DEL, END, PGDOWN posizionati sopra i tasti freccia (/idem/);
- tasto Enter grande, alto due file (/i.e./ di tipo ISO);
- presenza di due tasti SHIFT, CONTROL, WIN e ALT (destro e sinistro);
- presenza del tasto AltGr, ovvero differenzizione e specializzazione dei due tasti Alt (destro e sinistro);
- presenza di tasti funzione separati, "fisici";
- dimensione del tasto "\ |" uguale agli altri;
- dispsizione dei tasti non alfabetici "di tipo US";

- presenza di un tasto "` ~", 
- presenza di una coppia di tasti "[ {",  "] }";
- disposizione consecutiva, "aperta - chiusa", di tutti i tasti delle parentesi, tonda, graffa, quadra e degli altri tasti con logica simile simili (p.es. '<' e '>');
- presenza /nello stessso tasto/ dei caratteri apice (') e doppio apice (");
- possibilita' di scrivere i caratteri /at/ e /hash/ (@, #) senza ricorrere all'AltGr (ma al piu' come SHIFT + tasto);
- possibilita' di scrivere i caratteri /slash/ e /backslash/  (/,\) direttamente, senza ricorrere al tasto SHIFT;
- possibilita' di scrivere il carattere punto e virgola direttamente, senza ricorrere al tasto SHIFT;
- mappatura delle accentate italiane, minuscole e maiuscole, mediante Altgr sui tasti a-e-i-o-u-d-j. 


** soluzione individuata

- partire da una tastiera TKL UK ISO Layout (p.es. Keychron K8) (cfr. http://www.farah.cl/Keyboardery/A-Visual-Comparison-of-Different-National-Layouts/)
- sostituire i tasti dell'UK layout con i corrispondeti tasti US, fino ad ottenere una disposizione simile alla tastiera US ISO; in dettaglio si deve sostituire o commutare sei tasti: tre in R1, nessuno in R2, due in R3, uno in R1 (partendo dall'UK ISO LAyout descritto qui, bisogna operare sui tasti evidenziati in blu): questo produrra' una configurazione di tasti non alfabetici "di tipo US", con il tasto "\ |" duplicato (accanto allo shift di sinistra e accanto al tasto Enter, in basso)
- configurare nel sistema operativo la tastiera come "US International layout", per poter avere attivo il tasto AltGr come tasto separato;
- scaricare dal sito AHK (https://www.autohotkey.com) il tool in versione /portable/, scegliendo cioe' il file .zip che non richiede installazione (https://www.autohotkey.com/download/ahk.zip);
- scaricare lo script adfASDAdADA.ahk da questo repository;
- associare l'estensione .ahk al lancio della versione UTF 64 del tool (=XXXXXXXX.EXE=);
- lanciare lo script .ahk (ed eventualmente metterlo in esecuzione automatica, all'avvio)
- se tutto e' stato eseguito correttamente comparira' il logo verde "H" nella barra di stato.

** risultato





** storia del problema e descrizione della soluzione

La tastiera fisca che utilizzo è una TKL UK ISO Layout (https://www.keychron.com/collections/keychron-iso-keyboard-collection/products/keychron-k8-wireless-mechanical-keyboard-uk-iso-layout?variant=32246756409433).

Inizalmente l'ho impostata con la configurazione standard "UK Extended" disponibile su Linux, pensando che questo sarebbe stato sufficiente, ma dopo mi sono reso conto di poter fare di meglio e risolvere definitivamente il /problema/ che il layout UK extendend risolveva male e solo in parte.

Il /problema/, per quanto mi concerne, e' che la tastiera italiana e' totalmente inadeguata per chi deve lavorare su un PC (e non su una Olivetti) - indipendentemente dal tipo di lavoro che svolge!, ed ha una scelta e disposizione di tasti assolutamente demenziale; purtroppo la tastiera US o quella UK non rappresentano, per me, una solzuione accettabile, almeno cosi' come sono.

Avendo infine scelto di cambiare assetto, dopo molti anni di frustrante utilizzo della tastiera italiana, ed affrontare il lungo e esasperante processo di riconfigurazione della "memmoria della mano", ho deciso che dovevo almeno, in cambio, ottenere una soluzione generale, soddisfacente, esportabile e definitiva.

Del /problema/ ho detto piu diffusamente altrove (cfr. htttp://) e li' rimando per capire cosa mi ha portato a scegliere di tornare ad una tastiera "americana", ma con alcune modifiche indispensabili, con alcune migliorie e con la possibilita' di scrivere anche tutti i glifi dell'alfabeto italiano, maiuscole e minuscole, direttamente e senza troppe contorsioni.

Ho quindi deciso di affrontare il problema una volta per tutte e "prendere il toro per gli apici". La soluzione che ho trovato e' stata quella di abbandonare il pur buon comporomesso rappresentato dal layout UK Extended, ritornare a quello USA (ma su una tastiera fisica ISO) e modificarlo per le mie esigenze.







